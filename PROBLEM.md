# ICFPC 2025 - Labyrinthine Library Mapping Problem

## 問題概要

六角形の部屋で構成される迷宮図書館（Ædificium）の地図を、最小限の探索回数で作成する問題。

## 構造

### 部屋の特徴
- 各部屋は六角形で、6つのドア（0-5番）を持つ
- 各部屋には2ビット整数のラベル（0-3）が付いている
- 同じラベルを持つ複数の部屋が存在可能
- ドアは他の部屋、または同じ部屋の同じ/別のドアに繋がる可能性がある

### 探索の仕組み
1. **ルートプラン**: 0-5の数字の列で、訪問するドアの順序を指定
2. **記録**: 各部屋を訪問する際、その部屋の2ビットラベルを記録
3. **開始地点**: 常に同じ部屋から探索を開始

## API仕様

### エンドポイント
- **POST /register**: チーム登録（IDを取得）
- **POST /select**: 問題を選択（新しい地図を生成）
- **POST /explore**: ルートプランを実行して部屋のラベルを取得
- **POST /guess**: 推定した地図を提出

### 重要な制約
- 探索回数（queryCount）を最小化することが目標
- 複数のルートプランを1回のリクエストで送信可能（推奨）
- 各/exploreリクエストごとに1ポイントのペナルティ

## 地図の表現

```json
{
  "rooms": [int],           // 各部屋の2ビットラベルのリスト
  "startingRoom": int,      // 開始部屋のインデックス
  "connections": [          // 部屋間の接続
    {
      "from": { "room": int, "door": int },
      "to": { "room": int, "door": int }
    }
  ]
}
```

## 解法の方針

1. **初期探索**: 短いルートプランで基本的な構造を把握
2. **体系的な探索**: 全てのドアを網羅的に調査
3. **グラフ再構築**: 収集した情報から地図を推定
4. **最適化**: 探索回数を最小化するため、複数のルートプランをバッチ送信

## スコアリング
- 各問題で正しい地図を最小の探索回数で生成したチームが高順位
- グローバルランキングはBordaカウント方式で計算