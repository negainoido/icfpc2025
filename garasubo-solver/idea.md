1. まず、長いランダムウォークを投げてその結果を保存する
2. 最初に登場した各ラベルのノードを、そのノードへのパスとラベルをメモして決定済みノードに追加
3. 0から3の決定済みノードを炭で上書きし、さっきと同様のランダムウォークをすることで、同じノードを特定する
4. まだ同定できていないノードの中で最初に登場した各ラベルのノードを、そのノードへのパスとラベルをメモして決定済みノードに追加
5. 新たにできた決定済みノードを炭で上書きして、さっきと同様のランダムウォークにより同じノードを特定する
6. すべてのノードが特定できたらグラフを可能な限り構築する
7. 既知のグラフのノードをすべて踏んだあと、グラフの中で遷移先が未確定なdoorを使って遷移した先からランダムウォークする。
8. 炭を使って新たにランダムウォークしたノードを特定していく
9. グラフを可能な限り更新する
10. グラフが確定するまで7から繰り返す。
